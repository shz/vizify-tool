{
  "version": 3,
  "sources": [
    "node_modules/watchify/node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/bridge.js",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/components/app.jsx",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/components/compile_error.jsx",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/components/player.jsx",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/components/playpause.jsx",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/components/scrubber.jsx",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/components/viz.jsx",
    "/Users/lpstein/Development/Yahoo/vizify-org/tool/lib/commands/devel2/client/index.js",
    "node_modules/vizify-javascript/lib/affine_matrix.js",
    "node_modules/vizify-javascript/lib/canvas.js",
    "node_modules/vizify-javascript/lib/card.js",
    "node_modules/vizify-javascript/lib/card_config.js",
    "node_modules/vizify-javascript/lib/clock.js",
    "node_modules/vizify-javascript/lib/color.js",
    "node_modules/vizify-javascript/lib/config.js",
    "node_modules/vizify-javascript/lib/current_transform_shim.js",
    "node_modules/vizify-javascript/lib/fonts.js",
    "node_modules/vizify-javascript/lib/frame.js",
    "node_modules/vizify-javascript/lib/geometry.js",
    "node_modules/vizify-javascript/lib/gradient_spec.js",
    "node_modules/vizify-javascript/lib/index.js",
    "node_modules/vizify-javascript/lib/index_node.js",
    "node_modules/vizify-javascript/lib/invert-matrix.js",
    "node_modules/vizify-javascript/lib/json.js",
    "node_modules/vizify-javascript/lib/react.js",
    "node_modules/vizify-javascript/lib/region-hover.js",
    "node_modules/vizify-javascript/lib/render_context.js",
    "node_modules/vizify-javascript/lib/text_layout_engine.js",
    "node_modules/vizify-javascript/lib/utils.js",
    "node_modules/vizify-javascript/lib/viz.js",
    "node_modules/vizify-javascript/static/vztouch.js",
    "node_modules/watchify/node_modules/browserify/node_modules/events/events.js",
    "node_modules/watchify/node_modules/browserify/node_modules/inherits/inherits_browser.js",
    "node_modules/watchify/node_modules/browserify/node_modules/path-browserify/index.js",
    "node_modules/watchify/node_modules/browserify/node_modules/process/browser.js",
    "node_modules/watchify/node_modules/browserify/node_modules/util/support/isBufferBrowser.js",
    "node_modules/watchify/node_modules/browserify/node_modules/util/util.js"
  ],
  "names": [],
  "mappings": "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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "var events = require('events')\n  , util = require('util')\n  ;\n\nvar Bridge = module.exports = function Bridge() {\n  events.EventEmitter.call(this);\n\n  this.pending = [];\n\n  this._open();\n};\nutil.inherits(Bridge, events.EventEmitter);\n\nBridge.prototype.send = function(type, opts) {\n  if (!this.ws) {\n    this.pending.push(Array.prototype.slice.call(arguments));\n    return;\n  }\n\n  var msg = { type: type };\n  if (opts) {\n    for (var i in opts) if (opts.hasOwnProperty(i)) {\n      msg[i] = opts[i];\n    }\n  }\n\n  this.ws.send(JSON.stringify(msg));\n};\n\nBridge.prototype.close = function() {\n  try {\n    this.ws.close();\n  } catch (err) {}\n\n  delete this.ws;\n};\n\nBridge.prototype._open = function() {\n  if (this._openTimeout !== undefined) {\n    return;\n  }\n  this._openTimeout = setTimeout(function() {\n    delete this._openTimeout;\n\n    this.ws = new WebSocket(window.location.href.replace(/^http/, 'ws'));\n    this.ws.addEventListener('close', this._onError.bind(this));\n    this.ws.addEventListener('error', this._onError.bind(this));\n    this.ws.addEventListener('message', this._onMessage.bind(this));\n    this.ws.addEventListener('open', function() {\n      while (this.pending.length) {\n        this.send.apply(this, this.pending.shift());\n      }\n    }.bind(this));\n  }.bind(this), 100);\n};\n\nBridge.prototype._onError = function() {\n  this.close();\n  this._open();\n};\n\nBridge.prototype._onMessage = function(msg) {\n  var data = JSON.parse(msg.data);\n  var type = data.type;\n  delete data.type;\n\n  this.emit(type, data);\n};\n",
    "var vizify = require('vizify-javascript')\n  , Bridge = require('../bridge')\n  , Player = require('./player')\n  , CompileError = require('./compile_error')\n  ;\n\nmodule.exports = React.createClass({\n  getInitialState: function() {\n    return {\n      viz: null,\n      error: null,\n      data: '{\"status\": \"active\"}',\n      cardJSON: null\n    }\n  },\n\n  render: function() {\n    var player = null;\n    if (this.state.viz && this.state.cardJSON) {\n      player = <div>\n                 <h1>{this.state.cardJSON.name}</h1>\n                 <Player viz={this.state.viz}/>\n               </div>;\n    } else {\n      player = <h1>Loading</h1>;\n    }\n\n    var error = null;\n    if (this.state.error) {\n      error = <CompileError details={this.state.error} />;\n    }\n\n    return (\n      <div className=\"app-component\">\n        {player}\n        {error}\n      </div>\n    );\n  },\n\n  componentDidMount: function() {\n    this.bridge = new Bridge();\n    this.bridge.on('compile', this.onCompile);\n    this.bridge.on('error', this.onCompileError);\n    this.bridge.on('cardJSON', this.onUpdateCardJSON);\n  },\n  componentWillUnmount: function() {\n    this.bridge.close();\n    this.bridge = null;\n  },\n\n  componentDidUpdate: function() {\n    if (this.state.viz) {\n      this.reload();\n    }\n  },\n\n  onGetData: function(data) {\n    this.setState({ data: data });\n  },\n  onCompile: function(data) {\n    (function() { eval(data.code) }).call(window);\n\n    if (!this.state.viz) {\n      var size = (this.state.cardJSON || {}).size || {};\n      var viz = new vizify.Viz(window.viz.main, size.width || 600, size.height || 450, 1, this.state.data);\n      viz.load(function() {\n        this.setState({ viz: viz, error: null });\n        viz.resize(size.width || 600, size.height || 450, 1);\n        viz.play();\n      }.bind(this));\n    } else {\n      this.setState({ error: null });\n      this.reload();\n    }\n  },\n  onCompileError: function(data) {\n    this.setState({ error: data });\n  },\n  onUpdateCardJSON: function(data) {\n    data = data.data;\n\n    if (!this.state.cardJSON && this.state.viz) {\n      var size = data.size || {};\n      this.state.viz.resize(size.width || 600, size.height || 450, 1);\n    }\n    this.setState({ cardJSON: data });\n  },\n\n  reload: function() {\n    this.state.viz.reload(window.viz.main, this.state.data);\n  }\n});\n",
    "module.exports = React.createClass({\n  propTypes: {\n    details: React.PropTypes.object.isRequired\n  },\n\n  render: function() {\n    return (\n      <div className=\"compile-error-component\">\n        <div className=\"filename\">Error in {this.props.details.filename}:</div>\n        <div className=\"gutter\">\n          {this.props.details.gutter.map(function(s) {\n            return <pre>{s}</pre>;\n          })}\n        </div>\n        <div className=\"context\">\n          {this.props.details.highlighted.map(function(s) {\n            return <pre dangerouslySetInnerHTML={{__html: s}} />\n          })}\n        </div>\n        <div className=\"message\">{this.props.details.message}</div>\n      </div>\n    );\n  }\n});\n",
    "var PlayPause = require('./playpause')\n  , Scrubber = require('./scrubber')\n  , Viz = require('./viz')\n  ;\n\nmodule.exports = React.createClass({\n  propTypes: {\n    viz: React.PropTypes.object.isRequired\n  },\n\n  getInitialState: function() {\n    return {\n      width: this.props.viz.card.width,\n      height: this.props.viz.card.height,\n      diffWidth: 0,\n      diffHeight: 0,\n      diffEnabled: false\n    };\n  },\n\n  render: function() {\n    var size = {\n      width: this.state.width,\n      height: this.state.height\n    };\n    var diffStyle = {\n      display: 'none'\n    };\n    if (this.state.diffEnabled) {\n      diffStyle.width = this.state.diffWidth + this.state.width;\n      diffStyle.height = this.state.diffHeight + this.state.height;\n      diffStyle.marginLeft = (this.state.diffWidth / -2).toFixed(0);\n      diffStyle.marginTop = (this.state.diffHeight / -2).toFixed(0);\n      diffStyle.display = 'block'\n    }\n\n    return (\n      <div className=\"player-component\" style={{width: this.state.width}}>\n        <div className=\"size-diff\" style={diffStyle}>\n          <div className=\"width\">{diffStyle.width}px</div>\n          <div className=\"height\">{diffStyle.height}px</div>\n        </div>\n        <div className=\"sized\" style={size}>\n          <Viz viz={this.props.viz} />\n          <div className=\"dragger\" ref=\"dragger\" />\n        </div>\n        <PlayPause viz={this.props.viz} />\n        <Scrubber viz={this.props.viz} />\n      </div>\n    );\n  },\n\n  componentDidMount: function() {\n    this.touchKiller = vz.touch(this.refs.dragger.getDOMNode(), {\n      drag: function(e) {\n        if (e.dragState === 0) {\n          this.setState({ diffEnabled: true });\n        } else if (e.dragState === 1) {\n          this.setState({\n            diffWidth: e.relative.x,\n            diffHeight: e.relative.y,\n            diffEnabled: true,\n          });\n        } else if (e.dragState === 2) {\n          var newWidth = this.state.width + this.state.diffWidth;\n          var newHeight = this.state.height + this.state.diffHeight;\n\n          this.setState({\n            width: newWidth,\n            height: newHeight,\n            diffWidth: 0,\n            diffHeight: 0,\n            diffEnabled: false\n          });\n\n          this.props.viz.resize(newWidth, newHeight, 1);\n          this.props.viz.frame(this.props.viz.getTime());\n        }\n      }.bind(this)\n    });\n  },\n  componentWillUnmount: function() {\n    this.touchKiller();\n    delete this.touchKiller();\n  }\n});\n",
    "module.exports = React.createClass({\n  propTypes: {\n    viz: React.PropTypes.object.isRequired\n  },\n\n  getInitialState: function() {\n    return { playing: false };\n  },\n\n  render: function() {\n    return (\n      <div className=\"playpause-component\" onClick={this.onToggle}>\n        {this.state.playing ? '❙❙' : '►'}\n      </div>\n    );\n  },\n\n  componentDidMount: function() {\n    this.props.viz.on('end', this.onEnd);\n    this.props.viz.on('play', this.onPlay);\n    this.props.viz.on('pause', this.onPause);\n  },\n  componentWillUnmount: function() {\n    this.props.viz.removeEventListener('end', this.onEnd);\n    this.props.viz.removeEventListener('play', this.onPlay);\n    this.props.viz.removeEventListener('pause', this.onPause);\n  },\n\n  onToggle: function() {\n    if (this.state.playing) {\n      this.props.viz.pause();\n    } else {\n      if (this.props.viz.duration === this.props.viz.getTime()) {\n        this.props.viz.seek(0);\n      }\n      this.props.viz.play();\n    }\n  },\n  onEnd: function() {\n    this.setState({ playing: false });\n  },\n  onPlay: function() {\n    this.setState({ playing: true });\n  },\n  onPause: function() {\n    this.setState({ playing: false });\n  }\n});\n",
    "module.exports = React.createClass({\n  propTypes: {\n    viz: React.PropTypes.object.isRequired\n  },\n\n  getInitialState: function() {\n    return {\n      ts: 0,\n      duration: 0\n    };\n  },\n\n  render: function() {\n    var scale = 'scale(' + (this.state.ts / this.state.duration) + ', 1)';\n    var innerStyle = {\n      transform: scale,\n      OTransform: scale,\n      msTransform: scale,\n      Moztransform: scale,\n      WebkitTransform: scale\n    };\n\n    return (\n      <div className=\"scrubber-component\" ref=\"scrubber\">\n        <div className=\"text\">{this.state.ts.toFixed(0)} / {this.state.duration}</div>\n        <div className=\"inner\" style={innerStyle}></div>\n      </div>\n    );\n  },\n\n  componentDidMount: function() {\n    this.props.viz.on('frame', this.onFrame);\n    this.touchKiller = vz.touch(this.refs.scrubber.getDOMNode(), {\n      click: this.onSeek,\n      drag: this.onSeek\n    });\n  },\n  componentWillUnmount: function() {\n    this.props.viz.removeListener('frame', this.onFrame);\n    this.touchKiller();\n    delete this.touchKiller();\n  },\n\n  onFrame: function(ts) {\n    this.setState({ ts: ts, duration: this.props.viz.card.duration });\n  },\n  onSeek: function(e) {\n    if (e.dragState !== 1) {\n      this.calculateBounds();\n    }\n\n    // Turn our window position into a value in [0, 1] based on position\n    // within the scrubber bounds.\n    var p = Math.min(1, Math.max(0, (e.absolute.x - this.bounds.left)) / this.bounds.width);\n\n    var ts = this.state.duration * p;\n    this.props.viz.pause();\n    this.props.viz.frame(ts);\n    this.props.viz.seek(ts);\n    if (e.dragState === undefined) {\n      this.props.viz.play();\n    }\n  },\n\n  calculateBounds: function() {\n    this.bounds = this.refs.scrubber.getDOMNode().getClientRects()[0];\n  }\n});\n",
    "module.exports = React.createClass({\n  propTypes: {\n    viz: React.PropTypes.object.isRequired\n  },\n\n  render: function() {\n    return (\n      <div className=\"viz-component\">\n        <div ref=\"holder\" className=\"container\"></div>\n      </div>\n    );\n  },\n\n  componentDidMount: function() {\n    this.mountElement();\n  },\n  componentDidUpdate: function() {\n    this.mountElement();\n  },\n\n  mountElement: function() {\n    var node = this.refs.holder.getDOMNode();\n    Array.prototype.forEach.call(node.childNodes, function(el) {\n      node.removeChild(el);\n    });\n    node.appendChild(this.props.viz.element);\n  }\n});\n",
    "var App = require('./components/app');\n\nsetTimeout(function() {\n  React.render(React.createElement(App), document.body);\n}, 10);\n",
    "/* global DOMException */\n\nvar invert = require('./invert-matrix');\n\n//\n// A 2x3 matrix of the form:\n//\n// [a, c, e]\n// [b, d, f]\n//\n// API is similar to that of SVGMatrix\n//\nvar AffineMatrix = module.exports = function AffineMatrix(a, b, c, d, e, f) {\n  // Matrix-like things\n  if (a && typeof a === 'object' && typeof a.a === 'number') {\n    f = a.f;\n    e = a.e;\n    d = a.d;\n    c = a.c;\n    b = a.b;\n    a = a.a;\n\n  // Array-like things\n  } else if (a && a.length) {\n    f = a[5];\n    e = a[4];\n    d = a[3];\n    c = a[2];\n    b = a[1];\n    a = a[0];\n  }\n\n  // Use an identity matrix by default, overridden by whatever the user\n  // provides.\n  this.a = a === undefined ? 1 : a;\n  this.b = b === undefined ? 0 : b;\n  this.c = c === undefined ? 0 : c;\n  this.d = d === undefined ? 1 : d;\n  this.e = e === undefined ? 0 : e;\n  this.f = f === undefined ? 0 : f;\n};\nAffineMatrix.prototype = {\n  constructor: AffineMatrix,\n\n  multiply: function(m) {\n    return new AffineMatrix(\n      this.a * m.a + this.c * m.b,\n      this.b * m.a + this.d * m.b,\n      this.a * m.c + this.c * m.d,\n      this.b * m.c + this.d * m.d,\n      this.a * m.e + this.c * m.f + this.e,\n      this.b * m.e + this.d * m.f + this.f\n    );\n  },\n  multiplyVector: function(x, y) {\n    var error = function() {\n      throw new Error(\"Don't know how to multiply a \" + x.toString());\n    };\n\n    if (typeof x === 'object') {\n      if (x.length === 2) {\n        y = x[1];\n        x = x[0];\n      } else if (typeof x.x === 'number' && typeof x.y === 'number') {\n        y = x.y;\n        x = x.x;\n      } else {\n        error();\n      }\n    } else if (typeof x !== 'number' || typeof y !== 'number') {\n      error();\n    }\n\n    return {\n      x: this.a * x + this.c * y + this.e,\n      y: this.b * x + this.d * y + this.f\n    };\n  },\n\n  rotate: function(rad) {\n    var c = Math.cos(rad);\n    var s = Math.sin(rad);\n\n    return this.multiply(new AffineMatrix(\n      c, s, -s, c, 0, 0\n    ));\n  },\n  scale: function(x, y) {\n    return this.multiply(new AffineMatrix(\n      x, 0, 0, y, 0, 0\n    ));\n  },\n  translate: function(x, y) {\n    return this.multiply(new AffineMatrix(\n      1, 0, 0, 1, x, y\n    ));\n  },\n\n  toString: function() {\n    return '[ ' + [this.a, this.c, this.e].join(', ') + '\\n' +\n                  [this.b, this.d, this.f].join(', ') + ' ]';\n  },\n  toArray: function() {\n    return [ this.a, this.b, this.c, this.d, this.e, this.f ];\n  },\n\n  inverse: function () {\n    var ctm = this;\n    var inverseMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    inverseMatrix = invert(inverseMatrix, [ctm.a, ctm.b, 0, ctm.c, ctm.d, 0, ctm.e, ctm.f, 1]);\n    if(!inverseMatrix) {\n      var exception = new DOMException(\"Matrix not invertible\");\n      exception.code = 2; // value of const SVG_MATRIX_NOT_INVERTABLE\n      throw exception;\n    }\n\n    // Column-major to SVGMatrix style\n    return new AffineMatrix([\n      inverseMatrix[0],\n      inverseMatrix[1],\n      inverseMatrix[3],\n      inverseMatrix[4],\n      inverseMatrix[6],\n      inverseMatrix[7]\n    ]);\n  }\n};\n",
    "var util = require('util');\nvar events = require('events');\nvar GradientSpec = require('./gradient_spec');\nvar invertCoordinates = require('./utils').invertCoordinates;\nvar AffineMatrix = require('./affine_matrix');\n\nvar Canvas = module.exports = function Canvas(width, height, scaling) {\n  events.EventEmitter.call(this);\n\n  if (typeof document === 'undefined') {\n    throw new Error('Don\\'t know how to create a canvas element');\n  }\n\n  // Prep internal state\n  this.canvas = document.createElement('canvas');\n  this._ctx = this.canvas.getContext('2d');\n  this.width = 0;\n  this.height = 0;\n  this.scaling = 0;\n  this.textCache = [];\n  this._ratio = 0;\n  this._saveCount = 0;\n  this._ext = {};\n\n  // Bootstrap canvas size\n  this.resize(width, height, scaling);\n\n  // Determine basic sans-serif font family based on user agent\n  this.fontFamilySansSerif = (navigator.userAgent.match(/Mac/)) ? 'Helvetica Neue' : 'Arial';\n\n  // Rendering optimizations\n  this._ctx.patternQuality = 'best';\n  this._ctx.textDrawingMode = 'path';\n  this._ctx.antialias = 'subpixel';\n  this._ctx.webkitImageSmoothingEnabled = true;\n\n  // Listen for events\n  this.regions = [];\n};\nutil.inherits(Canvas, events.EventEmitter);\n\n\n// Internal utility\n/* istanbul ignore next */\nCanvas.prototype.regionEventListener = function(eventType, ev) {\n  if (this.regions && this.regions.length > 0) {\n    var canvasCoords = this.computeDocumentPosition().toCanvasCoords(ev.absolute.x, ev.absolute.y);\n    var inverseCoords;\n    var region;\n    for (var i = 0; i < this.regions.length; i += 1) {\n      region = this.regions[i];\n      inverseCoords = invertCoordinates(canvasCoords, region.transform);\n      // TODO consider overlapping regions in the future.\n      // Currently latest-declared region gets the event.\n      if (region.rect.containsPoint(inverseCoords)) {\n        ev.region = region;\n      }\n    }\n    if (ev.region) {\n      this.emit(eventType, ev);\n    }\n  }\n};\n\n/* istanbul ignore next */\nCanvas.prototype.computeDocumentPosition = function() {\n  var x = 0;\n  var y = 0;\n  var el = this.canvas;\n  while (el.offsetParent) {\n    x += el.offsetLeft;\n    y += el.offsetTop;\n    el = el.offsetParent;\n  }\n\n  var scrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\n  var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n\n  return {\n    scroll: {x: scrollLeft, y: scrollTop},\n    canvas: {x: x, y: y},\n    toCanvasCoords: function(absX, absY) {\n      return {\n        x: absX - x,\n        y: absY - y\n      };\n    }\n  };\n};\n\n\nCanvas.prototype.resize = function(width, height, scaling) {\n  scaling = scaling || 1;\n  this.width = width;\n  this.height = height;\n  this.scaling = scaling;\n\n  // DRY\n  var ctx = this._ctx;\n  var canvas = this.canvas;\n\n  // Set the layout size\n  /* istanbul ignore else */\n  if (!canvas.style) {\n    // JSDOM workaround\n    canvas.style = {};\n  }\n\n  canvas.style.width = width * scaling + 'px';\n  canvas.style.height = height * scaling + 'px';\n\n  // Base scaling ratio from logical to physical\n  var baseScaleRatio = scaling;\n\n  // Calculate scaling ratio for devices with mismatched backing\n  // store ratios and device pixel ratios.\n  var devicePixelRatio = (typeof window === 'undefined' ? {} : window).devicePixelRatio || 1;\n  var backingStoreRatio = ctx.webkitBackingStorePixelRatio ||\n    ctx.mozBackingStorePixelRatio ||\n    ctx.msBackingStorePixelRatio ||\n    ctx.oBackingStorePixelRatio ||\n    ctx.backingStorePixelRatio || 1;\n  var backingScaleRatio = devicePixelRatio / backingStoreRatio;\n\n  // Combined ratio to go from logical -> backing\n  var ratio = this._ratio = backingScaleRatio * baseScaleRatio;\n\n  // Scale the canvas size to deal with backing != device pixel sizes\n  canvas.width = width * ratio;\n  canvas.height = height * ratio;\n\n  // Set up a scale matrix so that logical units become backing units\n  ctx.scale(ratio, ratio);\n\n  // Fire off the post creation hook.  By default this is empty, but\n  // different environments can extend it to do whatever it is they\n  // need to do.  For example, adding fonts to a node.js canvas.\n  this._postCreateHook();\n\n  this.emit('resize', width, height, scaling);\n};\n\n/* istanbul ignore next */\nCanvas.prototype.clear = function() {\n  this.resetTransform();\n  this._ctx.globalCompositeOperation = 'source-over';\n  this._ctx.textAlign = 'left';\n  this._ctx.globalAlpha = 1;\n  this._ctx.clearRect(0, 0, this.width, this.height);\n  this.textCache = [];\n  this.regions = [];\n};\n\nCanvas.prototype._postCreateHook = function() {};\n\n\n// Using interface defined in canvas.vgl\n\nvar delegate = function(m) {\n  Canvas.prototype[m] = function() {\n    return this._ctx[m].apply(this._ctx, arguments);\n  };\n};\n\n/* istanbul ignore next */\nvar getset = function(virgilName, f, nativeName) {\n  if (!nativeName) {\n    nativeName = virgilName;\n  }\n  var name = virgilName[0].toUpperCase() + virgilName.substr(1);\n  Canvas.prototype['set' + name] = function(v) {\n    this._ctx[nativeName] = f ? f(v) : v;\n  };\n  Canvas.prototype['get' + name] = function() {\n    return f ? f(this._ctx[nativeName]) : this._ctx[nativeName];\n  };\n};\n\n/* istanbul ignore next */\nvar convertColor = function(c) {\n  if (typeof c === 'string') {\n    return c;\n  } else {\n    return c.toString();\n  }\n};\n\ngetset('fillColor', convertColor, 'fillStyle');\ngetset('strokeColor', convertColor, 'strokeStyle');\ngetset('globalAlpha');\ngetset('lineWidth');\n\ndelegate('setLineDash');\ndelegate('fillRect');\ndelegate('beginPath');\ndelegate('closePath');\ndelegate('stroke');\ndelegate('fill');\n\ndelegate('translate');\ndelegate('scale');\ndelegate('rotate');\n\ndelegate('arc');\ndelegate('rect');\ndelegate('bezierCurveTo');\ndelegate('quadraticCurveTo');\ndelegate('moveTo');\ndelegate('lineTo');\ndelegate('fillText');\n\ndelegate('clearRect');\n\n// Modified\n\nCanvas.prototype.fillText = function(text, x, y) {\n  // The current transform has a base scale by the backing pixel ratio,\n  // which we need to back out.\n  var m = new AffineMatrix(this._ctx.currentTransform);\n  m = new AffineMatrix().scale(this.scaling / this._ratio, this.scaling / this._ratio).multiply(m);\n  m = m.translate(x, y);\n\n  this.textCache.push({\n    text: text,\n    font: this._ctx.font,\n    m: m\n  });\n  this._ctx.fillText(text, x, y);\n};\n\n/* istanbul ignore next */\nCanvas.prototype.save = function() {\n  this._saveCount++;\n  this._ctx.save();\n};\n\n/* istanbul ignore next */\nCanvas.prototype.restore = function() {\n  if (this._saveCount-- > 0) {\n    this._ctx.restore();\n  }\n  else {\n    this._saveCount = 0;\n  }\n};\n\n/* istanbul ignore next */\nCanvas.prototype.resetTransform = function() {\n  /* istanbul ignore else */\n  if (this._ctx.resetTransform) {\n    this._ctx.resetTransform();\n  }\n  else {\n    this._ctx.setTransform(1, 0, 0, 1, 0, 0);\n  }\n\n  this._ctx.scale(this._ratio, this._ratio);\n};\n\n/* istanbul ignore next */\nCanvas.prototype.drawTextLayout = function(spec, x, y) {\n  var c = this;\n  c.setFont(spec.font, spec.size);\n  var yCur = y + spec.verticalOffset + (spec.size * 0.7);\n  for (var i = 0; i < spec.lines.length; i++) {\n    c.fillText(spec.lines[i].text, (x + spec.lines[i].left), yCur);\n    yCur += spec.lines[i].lineHeight;\n  }\n};\n\n/* istanbul ignore next */\nCanvas.prototype.setFillGradient = function(grdspec) {\n  if (grdspec && grdspec.grd) {\n    this._ctx.fillStyle = grdspec.grd;\n  }\n};\n\n/* istanbul ignore next */\nCanvas.prototype.setStrokeGradient = function(grdspec) {\n  if (grdspec && grdspec.grd) {\n    this._ctx.strokeStyle = grdspec.grd;\n  }\n};\n\n\n/* istanbul ignore next */\nCanvas.prototype.setFont = function(fontSpec, size) {\n  /* Note: this is a bare-bones minimal use\n     of the font specification.  Only the\n     name and size information is used at this time.\n  */\n  var fontTable = {\n    sans: this.fontFamilySansSerif,\n    serif: \"serif\",\n    monospace: \"monospace\",\n  };\n  var fontCur = fontTable[fontSpec.family];\n  this._ctx.font = fontSpec.weight + ' ' + size + 'px \"' + fontCur + '\"';\n};\n\n/* istanbul ignore next */\nCanvas.prototype.measureTextWidth = function(str) {\n  return this._ctx.measureText(str).width;\n};\n\n/* istanbul ignore next */\nCanvas.prototype.startClip = function(x, y, w, h) {\n  this._ctx.beginPath();\n  this._ctx.rect(x, y, w, h);\n  this._ctx.clip();\n};\n\n/* istanbul ignore next */\nCanvas.prototype.setGlobalMaskMode = function(strMode) {\n  switch (strMode) {\n  case 'normal':\n    this._ctx.globalCompositeOperation = 'source-over';\n    break;\n  case 'mask':\n    this._ctx.globalCompositeOperation = 'source-atop';\n    break;\n  case 'reverse_mask':\n    this._ctx.globalCompositeOperation = 'destination-over';\n    break;\n  default:\n    console.log('setGlobalMaskMode received unknown global mask mode: ' + strMode);\n    break;\n  }\n};\n\n/* istanbul ignore next */\nCanvas.prototype.endClip = function() {\n  this._ctx.beginPath();\n  this._ctx.rect(-Infinity, -Infinity, Infinity, Infinity);\n  this._ctx.clip();\n};\n\n/* istanbul ignore next */\nCanvas.prototype.drawImage = function(img, x, y) {\n  if (!this.images[img]) {\n    return;\n  }\n\n  this._ctx.drawImage(this.images[img], x, y);\n};\n\n/* istanbul ignore next */\nCanvas.prototype.drawImageSized = function(img, x, y, w, h) {\n  if (!this.images[img]) {\n    return;\n  }\n\n  this._ctx.drawImage(this.images[img], x, y, w, h);\n};\n\n/* istanbul ignore next */\nCanvas.prototype.createLinearGradient = function(xStart, yStart, xEnd, yEnd, colorStart, colorEnd) {\n  var grd = this._ctx.createLinearGradient(xStart, yStart, xEnd, yEnd);\n  grd.addColorStop(0, colorStart.toString());\n  grd.addColorStop(1, colorEnd.toString());\n  return new GradientSpec({grd: grd});\n};\n\n/* istanbul ignore next */\nCanvas.prototype.createRadialGradient = function(xStart, yStart, radiusInner, radiusOuter, colorInner, colorOuter) {\n  var grd = this._ctx.createRadialGradient(xStart, yStart, radiusInner, xStart, yStart, radiusOuter);\n  grd.addColorStop(0, colorInner.toString());\n  grd.addColorStop(1, colorOuter.toString());\n  return new GradientSpec({grd: grd});\n};\n\n",
    "var util = require('util');\nvar events = require('events');\nvar RenderContext = require('./render_context');\nvar TextLayoutEngine = require('./text_layout_engine');\nvar frame = require('./frame');\nvar PAUSED = 'paused';\nvar PLAYING = 'playing';\nvar ENDED = 'ended';\n\n/* istanbul ignore next */\nvar Card = module.exports = function Card(canvas, creator, data) {\n  events.EventEmitter.call(this);\n\n  this._frame = null;\n  this._offset = 0;\n  this._start = -1;\n\n  this.status = PAUSED;\n  this.canvas = canvas;\n  this.width = canvas.width;\n  this.height = canvas.height;\n\n  var config = creator(data);\n  this.data = config.data;\n  this.duration = config.duration;\n  this.renderer = config.renderer;\n  this._performLayout = config.performLayout;\n  this._needsLayout = true;\n  this._layout = null;\n  this._images = config.images || [];\n  canvas.images = {};\n\n  var pointerEvents = ['click', 'down', 'up', 'drag', 'hoveron', 'hoveroff'];\n  for (var i = 0; i < pointerEvents.length; i++) {\n    canvas.on(pointerEvents[i], this.emit.bind(this, pointerEvents[i]));\n  }\n  canvas.on('resize', function(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this._needsLayout = true;\n    }\n    this.width = width;\n    this.height = height;\n  }.bind(this));\n};\nutil.inherits(Card, events.EventEmitter);\n\n/* istanbul ignore next */\nCard.prototype.load = function(callback) {\n  var waiting = this._images ? this._images.length : 0;\n  var canvas = this.canvas;\n\n  if (waiting === 0) {\n    if (callback) {\n      callback();\n    }\n    return;\n  }\n\n  if (this._images) {\n    this._images.forEach(function(i) {\n      var img = new Image();\n      img.onload = function() {\n        canvas.images[i] = img;\n        waiting--;\n        if (waiting === 0 && callback) {\n          callback();\n        }\n      };\n      img.onerror = function() {\n        waiting--;\n        if (waiting === 0 && callback) {\n          callback();\n        }\n      };\n      img.src = i;\n    });\n  }\n};\n\n// Reload the card by calling the newly passed in creator function\n// This is used when the card is recompiled by the dev environment\nCard.prototype.reload = function(creator, data) {\n  var playing = this.status === PLAYING;\n  if (playing) {\n    this.pause();\n  }\n  var config = creator(data);\n  this.data = config.data;\n  this.duration = config.duration;\n  this.renderer = config.renderer;\n  this._performLayout = config.performLayout;\n  this._needsLayout = true;\n\n  if (this.status === ENDED) {\n    this.frame(this.duration);\n  } else {\n    this.frame(this._offset);\n  }\n  if (playing) {\n    this.play();\n  }\n};\n\nCard.prototype.getTime = function() {\n  var elapsed = 0;\n  if (this.status === PLAYING) {\n    elapsed = this._offset + (Date.now() - this._start);\n  } else if (this.status === ENDED) {\n    elapsed = this.duration;\n  } else {\n    elapsed = this._offset;\n  }\n  return Math.max(0, Math.min(this.duration, elapsed));\n};\n\n/* istanbul ignore next */\nCard.prototype.frame = function(t, opts) {\n  opts = opts || {};\n  this.canvas.clear();\n\n  if (this._needsLayout) {\n    this._needsLayout = false;\n    var tutil = new TextLayoutEngine(this.canvas);\n    this._layout = this._performLayout && this._performLayout({width: this.width, height: this.height}, tutil, this.data);\n  }\n\n  var rc = new RenderContext();\n  rc.update(t, this.duration);\n  rc.c = this.canvas;\n  rc.data = this.data;\n  rc.layout = this._layout;\n  this.renderer(rc);\n  if (!opts.silent) {\n    this.emit('frame', t);\n  }\n};\n\n/* istanbul ignore next */\nCard.prototype.play = function() {\n  if (this.status === PLAYING) {\n    return;\n  }\n\n  this.status = PLAYING;\n  this._start = Date.now();\n\n  // Render one frame immediately\n  this.frame(this._offset);\n\n  // .bind is not supported by Android 2.3 native browser:\n  var self = this;\n\n  // Frame handler\n  var doFrame = function() {\n    var diff = Date.now() - self._start + self._offset;\n    self.frame(Math.min(diff, self.duration));\n\n    // If we haven't hit the duration yet, carry on\n    if (diff < self.duration) {\n      self._frame = frame.next(doFrame);\n    } else {\n      self._frame = null;\n      self._offset = 0;\n      self.status = ENDED;\n      self.emit('end');\n    }\n  };\n\n  // Bootstrap\n  this._frame = frame.next(doFrame);\n\n  // Event\n  this.emit('play');\n};\n\n/* istanbul ignore next */\nCard.prototype.seek = function(t) {\n  this._offset = t;\n  this.emit('seek', t);\n};\n\n/* istanbul ignore next */\nCard.prototype.pause = function() {\n  if (this.status === PAUSED) {\n    return;\n  }\n\n  if (this._frame !== null) {\n    frame.cancel(this._frame);\n    this._frame = null;\n  }\n\n  this._offset = Date.now() - this._start + this._offset;\n  this._start = -1;\n  this.status = PAUSED;\n  this.emit('pause');\n};\n",
    "module.exports = function CardConfig(other) {\n  this.data = other ? other.data : null;\n  this.duration = other ? other.duration : 0;\n  this.renderer = other ? other.renderer : null;\n  this.performLayout = other ? other.performLayout : null;\n  this.images = other ? other.images : [];\n};\n",
    "module.exports = function Clock(other) {\n  this.fromStart = other ? other.fromStart : 0;\n  this.fromEnd = other ? other.fromEnd : 0;\n  this.duration = other ? other.duration : 0;\n  this.percent = other ? other.percent : 0.0;\n};\n",
    "var convert = function(n) {\n  return (n * 255)|0;\n};\n\nvar Color = module.exports = function Color(other) {\n  this.r = other ? other.r : 0.0;\n  this.g = other ? other.g : 0.0;\n  this.b = other ? other.b : 0.0;\n  this.a = other ? other.a : 1;\n\n  if (typeof this.a === 'undefined') {\n    this.a = 1;\n  }\n};\n\nColor.prototype.toString = function() {\n  return 'rgba(' + [this.r, this.g, this.b].map(convert).join(', ') +\n    ', ' + this.a + ')';\n};\n",
    "module.exports = function Config(other) {\n  this.start = other ? other.start : 0;\n  this.end = other ? other.end : 0;\n  this.duration = other ? other.duration : -1;\n  this.operations = other ? other.operations.slice() : [];\n};\n",
    "var AffineMatrix = require('./affine_matrix');\n\n/*\n * Polyfill for the `currentTransform` property on CanvasRenderingContext2D.\n * Doesn't return or require an instance of SVGMatrix.\n */\nexports.shim = function(g) {\n  var canvas = g.document &&\n               g.document.createElement &&\n               g.document.createElement('canvas');\n  var ctx = canvas && canvas.getContext('2d');\n  if (ctx && ctx.currentTransform) {\n    return;\n  }\n\n  var proto = g.CanvasRenderingContext2D && g.CanvasRenderingContext2D.prototype;\n  if (!proto) {\n    return;\n  }\n\n  if ('currentTransform' in proto) {\n    return;\n  }\n\n  if ('mozCurrentTransform' in proto || (ctx && ctx.mozCurrentTransform)) {\n    // Bridge mozCurrentTransform which uses arrays, to use objects\n    Object.defineProperty(proto, 'currentTransform', {\n      configurable: true,\n      enumerable: true,\n      get: function() {\n        return new AffineMatrix(this.mozCurrentTransform);\n      }\n    });\n\n    return;\n  }\n\n\n  //// currentTransform management\n\n  Object.defineProperty(proto, 'currentTransform', {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n      if (!this.__ctm__) {\n        Object.defineProperty(this, '__ctm__', {\n          configurable: false,\n          enumerable: false,\n          value: new AffineMatrix(),\n          writable: true\n        });\n      }\n      return this.__ctm__;\n    }\n  });\n\n\n  var wrapAnd = function(name, f) {\n    if (!proto[name]) {\n      return;\n    }\n    var originalMethod = proto[name];\n    proto[name] = function() {\n      originalMethod.apply(this, arguments);\n      f.apply(this, arguments);\n    };\n  };\n\n  wrapAnd('setTransform', function(a, b, c, d, e, f) {\n    this.__ctm__ = new AffineMatrix(a, b, c, d, e, f);\n  });\n  wrapAnd('resetTransform', function() {\n    this.__ctm__ = new AffineMatrix();\n  });\n  wrapAnd('rotate', function(rad) {\n    this.__ctm__ = this.currentTransform.rotate(rad);\n  });\n  wrapAnd('scale', function(x, y) {\n    this.__ctm__ = this.currentTransform.scale(x, y);\n  });\n  wrapAnd('translate', function(x, y) {\n    this.__ctm__ = this.currentTransform.translate(x, y);\n  });\n  wrapAnd('transform', function(a, b, c, d, e, f) {\n    this.__ctm__ = this.currentTransform.multiply(new AffineMatrix(\n      a, b, c, d, e, f\n    ));\n  });\n  wrapAnd('save', function() {\n    if (!this.__ctmStack__) {\n      this.__ctmStack__ = [];\n    }\n    this.__ctmStack__.push(this.currentTransform);\n  });\n  wrapAnd('restore', function() {\n    var ctm = null;\n    if (this.__ctmStack__) {\n      ctm = this.__ctmStack__.pop();\n    }\n    if (ctm) {\n      this.__ctm__ = ctm;\n    }\n  });\n};\n\n",
    "module.exports = { };\n\nmodule.exports.Font = function Font(other) {\n  this.name = (other && other.name) ? other.name : null;\n  this.family = (other && other.family)? other.family : \"sans\";\n  this.weight = (other && other.weight) ? other.weight : 300;\n  this.italic = (other && (undefined !== other.italic)) ? other.italic : false;\n  this.condensed = (other && (undefined !== other.condensed)) ? other.condensed : false;\n};\n\nmodule.exports.FontMetrics = function FontMetrics(other) {\n  this.size = 0;\n  this.xheight = 0;\n  this.cap = 0;\n  this.ascender = 0;\n  this.descender = 0;\n};\n\nmodule.exports.TextLayout = function TextLayout(other) {\n  this.font = other ? other.font : new module.exports.Font();\n  this.size = other ? other.size : 0;\n  this.contentHeight = other ? other.contentHeight : 0;\n  this.verticalOffset = other ? other.verticalOffset : 0;\n  this.lines = other ? other.lines : [];\n  this.width = other ? other.width : 0;\n  this.height = other ? other.height : 0;\n};\n\nmodule.exports.LineLayout = function LineLayout(other) {\n  this.text = other ? other.text : \"\";\n  this.left = other ? other.left : 0;\n  this.width = other ? other.width : 0;\n  this.lineHeight = other ? other.lineHeight : 0;\n};\n",
    "/* jshint loopfunc:true */\nvar request = null;\nvar cancel = null;\n\n// If we're in the browser, attempt to use RAF\n// capabilities with a fallback to setTimeout.\n/* istanbul ignore if */\nif (typeof window !== 'undefined') {\n  // Try normal RAF\n  if (window.requestAnimationFrame) {\n    request = function(callback) { return window.requestAnimationFrame(callback); };\n    cancel = function(token) { return window.cancelAnimationFrame(token); };\n  } else {\n    // Fall back to vendor RAF\n    var prefixes = ['o', 'ms', 'moz', 'webkit'];\n    for (var i=0; i<prefixes.length; i++) {\n      if (window[prefixes[i] + 'RequestAnimationFrame']) {\n        request = function(callback) { return (window[prefixes[i] + 'RequestAnimationFrame'])(callback); };\n        cancel = function(token) { return (window[prefixes[i] + 'CancelAnimationFrame'])(token); };\n        break;\n      }\n    }\n\n    // Last resort, use setTimeout\n    if (!request || !cancel) {\n      request = function(callback) { return window.setTimeout(callback, 16); };\n      cancel = function(token) { return window.clearTimeout(token); };\n    }\n  }\n}\n\nexports.next = request;\nexports.cancel = cancel;\n",
    "exports.Point = function Point(point) {\n  this.x = point.x;\n  this.y = point.y;\n};\n\nexports.Size = function Size(size) {\n  this.width = size.width;\n  this.height = size.height;\n};\n\nexports.Rect = function Rect(rect) {\n  this.origin = rect.origin;\n  this.size = rect.size;\n};\n\nexports.Rect.prototype.containsPoint = function containsPoint(point) {\n  var rect = this;\n  if (rect.origin.x <= point.x &&\n    rect.origin.y <= point.y &&\n    point.x <= rect.origin.x + rect.size.width &&\n    point.y <= rect.origin.y + rect.size.height) {\n    return true;\n  } else {\n    return false;\n  }\n};\n",
    "module.exports = function GradientSpec(other) {\n  this.grd = (other && other.grd) ? other.grd : null;\n};\n",
    "/* globals React */\nmodule.exports = {\n  // JSON\n  JSON: require('./json'),\n  parseJSON: function(s) { return new module.exports.JSON(s); },\n\n  // Harness\n  Clock: require('./clock'),\n  RenderContext: require('./render_context'),\n  Config: require('./config'),\n  Card: require('./card'),\n  CardConfig: require('./card_config'),\n  Viz: require('./viz'),\n\n  // Rendering\n  Canvas: require('./canvas'),\n  GradientSpec: require('./gradient_spec'),\n  Color: require('./color'),\n  Font: require('./fonts').Font,\n  FontMetrics: require('./fonts').FontMetrics,\n  LineLayout: require('./fonts').LineLayout,\n  TextLayout: require('./fonts').TextLayout,\n  TextLayoutEngine: require('./text_layout_engine'),\n\n  // Geometry\n  Point: require('./geometry').Point,\n  Size: require('./geometry').Size,\n  Rect: require('./geometry').Rect,\n\n  // React integration\n  react: require('./react')(typeof React !== 'undefined' ? React : undefined)\n};\n",
    "exports = module.exports = require('./index');\n\n// Try/Catch is needed in order for this to be used by\n// the karma-based test system of crossover, which does NOT\n// use browserify and thus will choke on the require('path').\ntry { \n  var path = require('path');\n  exports.BROWSER_JS_PATH = path.join(__dirname, '..', 'release', 'vizify.js');\n}\ncatch(e){\n  // console.log(\"vizify-javascript: index_node.js is not running a browserified environment..\");\n  //\n  // So we don't have access to the path module.  So what?  Can't we go on without it?\n  // It would seem so at first glance, but...\n  //\n  // Unfortunately, in order to bring release/vizify.js into the karma/phantomJS environment,\n  // we have to use this crazy path:\n  //    exports.BROWSER_JS_PATH = require(__dirname + '/../../../../node_modules/vizify-javascript/release/vizify.js');\n  // since the POV of the __dirname is from the react component's test harness.\n  //\n  // No need to sweat this out... I prefer to simply use the require('./index') to bring V-J into the test environment.\n  // This has been found to be a fully-operational way to bring V-J into the test phantomJS instance.\n}\n",
    "/**\n * 3x3 matrix inversion function snipped from gl-matrix:\n * https://github.com/toji/gl-matrix/\n */\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE. */\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\n/* istanbul ignore next */\nvar invert = function(out, a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2],\n    a10 = a[3], a11 = a[4], a12 = a[5],\n    a20 = a[6], a21 = a[7], a22 = a[8],\n\n    b01 = a22 * a11 - a12 * a21,\n    b11 = -a22 * a10 + a12 * a20,\n    b21 = a21 * a10 - a11 * a20,\n\n  // Calculate the determinant\n    det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n};\n\nmodule.exports = invert;\n",
    "var Json = module.exports = function Json(json, raw) {\n  this.value = raw ? json : JSON.parse(json);\n};\n\nvar doThrow = function(v, type) {\n  throw new Error('JSON node is type ' + (typeof value) + ', cannot convert to ' + type);\n};\n\nJson.prototype.get = function(key) {\n  if (this.value === null) {\n    throw new Error('JSON node is null, cannot get child node');\n  }\n\n  return new Json(this.value[key], true);\n};\n\nJson.prototype.asStr = function() {\n  if (this.value === null) {\n    throw new Error('JSON node is null, cannot convert to string');\n  }\n  if (typeof this.value !== 'string') {\n    doThrow(this.value, 'string');\n  }\n\n  return this.value.toString();\n};\n\nJson.prototype.asInt = function() {\n  if (this.value === null) {\n    throw new Error('JSON node is null, cannot convert to int');\n  }\n\n  switch (typeof this.value) {\n    case 'string':\n      return parseInt(this.value, 10) || 0;\n    case 'number':\n      return this.value|0;\n    default:\n      doThrow(this.value, 'int');\n  }\n};\n\nJson.prototype.asFloat = function() {\n  if (this.value === null) {\n    throw new Error('JSON node is null, cannot convert to float');\n  }\n\n  switch (typeof this.value) {\n    case 'string':\n      return parseFloat(this.value) || 0;\n    case 'number':\n      return this.value;\n    default:\n      doThrow(this.value, 'float');\n  }\n};\n\nJson.prototype.asBool = function() {\n  if (this.value === null) {\n    throw new Error('JSON node is null, cannot convert to bool');\n  }\n  if (typeof this.value !== 'boolean') {\n    doThrow(this.value, 'bool');\n  }\n\n  return this.value;\n};\n\nJson.prototype.asList = function() {\n  if (this.value === null) {\n    throw new Error('JSON node is null, cannot convert to list');\n  }\n  if ((typeof this.value !== 'object') || (!(this.value instanceof Array))) {\n    doThrow(this.value, 'list');\n  }\n  if (!(this.value.map)) {\n    return [];\n  }else{\n    return this.value.map(function(v) { return new Json(v, true); });\n  }\n};\n\nJson.prototype.isNull = function() {\n  return this.value === null || this.value === undefined;\n};\n",
    "var Viz = require('./viz');\n\n/* istanbul ignore next */\nfunction createComponentClass(React) {\n  return React.createClass({\n    displayName: 'VizifyComponent',\n\n    propTypes: {\n      card: React.PropTypes.func.isRequired,\n      data: React.PropTypes.string.isRequired,\n      cardSizingSpec: React.PropTypes.object.isRequired,\n      autoplay: React.PropTypes.bool,\n      initialTime: React.PropTypes.number,\n      isVariableHeight: React.PropTypes.bool,\n      width: React.PropTypes.number,\n      height: React.PropTypes.number\n    },\n\n    getDefaultProps: function() {\n      return {\n        autoplay: true,\n        initialTime: 0\n      };\n    },\n\n    getInitialState: function() {\n      return {\n        time: this.props.initialTime,\n        computedWidth: this.props.width,\n        computedHeight: this.props.height\n      };\n    },\n\n    computeCanvasSize: function() {\n      // Sizing: Try to figure out available dimensions from props\n      var availableWidth = this.props.width;\n      var availableHeight = this.props.height;\n      var availableAspectRatio;\n\n      // Fallback to DOM layout dimensions\n      var node = this.isMounted() && this.refs.container.getDOMNode();\n      if (node && !availableWidth) {\n        availableWidth = node.clientWidth;\n      }\n      if (node && !availableHeight) {\n        availableHeight = node.clientHeight;\n      }\n\n      if (!availableWidth && !availableHeight) {\n        return {\n          width: this.props.cardSizingSpec.width,\n          height: this.props.cardSizingSpec.height\n        };\n      }\n\n      // Normalize all falsey values to zero\n      availableWidth = availableWidth || 0;\n      availableHeight = availableHeight || 0;\n\n      // The natural dimensions of the card\n      var cardSizingSpec = this.props.cardSizingSpec;\n      var cardWidth = cardSizingSpec.width;\n      var cardHeight = cardSizingSpec.height;\n      var cardAspectRatio = cardWidth / cardHeight;\n\n      // The final dimensions of the canvas into which the card will be rendered.\n      var canvasWidth = cardWidth;\n      var canvasHeight = cardHeight;\n\n      if (cardSizingSpec.resizingMode === \"contain\") {\n        // If availableHeight is 0, assume unconstrained height\n        availableAspectRatio = availableHeight > 0 ? availableWidth / availableHeight : Number.MIN_VALUE;\n        if (availableAspectRatio > cardAspectRatio) {\n          // If given area's aspect ratio is greater than the card's\n          // intrinsic ratio, we are height-constrained.\n          canvasHeight = availableHeight;\n          canvasWidth = availableHeight * cardAspectRatio;\n        } else {\n          // Otherwise, we are width-constrained.\n          canvasWidth = availableWidth;\n          canvasHeight = availableWidth / cardAspectRatio;\n        }\n      } else if (cardSizingSpec.resizingMode === \"fill\") {\n        // Just stretch to fill the given space...\n        canvasWidth = availableWidth;\n        canvasHeight = availableHeight;\n        if (availableHeight === 0) {\n          // ... unless the given space has zero height, in which case we respect the aspect ratio.\n          canvasHeight = availableWidth / cardAspectRatio;\n        }\n      }\n\n      return {\n        width: canvasWidth,\n        height: canvasHeight\n      };\n    },\n\n    shouldComponentUpdate: function(nextProps, nextState) {\n      // If size changed, YES should update\n      if (this.state.computedWidth !== nextState.computedWidth || this.state.computedHeight !== nextState.computedHeight) {\n        return true;\n      }\n      if (this.props.width !== nextProps.width || this.props.height !== nextProps.height) {\n        return true;\n      }\n      if (this.props.cardSizingSpec.width !== nextProps.cardSizingSpec.width || this.props.cardSizingSpec.height !== nextProps.cardSizingSpec.height) {\n        return true;\n      }\n      if (this.props.cardSizingSpec.resizingMode !== nextProps.cardSizingSpec.resizingMode) {\n        return true;\n      }\n\n      // If data payload changed, YES should update\n      if (nextProps.data !== this.props.data) {\n        return true;\n      }\n\n      return false;\n    },\n\n    componentDidUpdate: function(prevProps /*, prevState*/) {\n      var dimensions = this.computeCanvasSize();\n\n      if (prevProps.data !== this.props.data) {\n        this.viz.reload(this.props.data);\n        this.viz.seek(0);\n        this.viz.play();\n      }\n\n      this.viz.resize(dimensions.width, dimensions.height, this.viz.canvas.scaling);\n      this.setState({\n        computedWidth: dimensions.width,\n        computedHeight: dimensions.height\n      });\n    },\n\n    componentDidMount: function() {\n      var dimensions = this.computeCanvasSize();\n      var viz = this.viz = new Viz(this.props.card, dimensions.width, dimensions.height, 1, this.props.data);\n      this.refs.container.getDOMNode().appendChild(viz.element);\n      this.setState({\n        computedWidth: dimensions.width,\n        computedHeight: dimensions.height\n      });\n\n      if (this.props.autoplay) {\n        viz.load(function() {\n          viz.seek(this.state.time);\n          viz.play();\n        }.bind(this));\n      }\n\n      // Backwards compatibility\n      this.canvas = this.viz.canvas;\n      this.card = this.viz.card;\n    },\n\n    componentWillUnmount: function() {\n      if (this.viz) {\n        this.viz.pause();\n      }\n      this.viz = null;\n      this.card = null;\n      this.canvas = null;\n    },\n\n    render: function() {\n      // If variable height, pre-allocate space based on width. This is done\n      // specially to avoid a height pop on initial document layout.\n      // See: http://alistapart.com/article/creating-intrinsic-ratios-for-video\n      if (this.props.isVariableHeight) {\n        return React.DOM.div( // Container to set the width\n          {\n            className: \"vizify-component\",\n            style: {\n              position: \"relative\",\n              width: this.state.computedWidth,\n              height: this.state.computedHeight\n            }\n          },\n          React.DOM.div( // Container to set height based by using padding hax\n            {\n              style: {\n                position: \"relative\",\n                width: \"100%\",\n                paddingBottom: this.props.cardSizingSpec.height / this.props.cardSizingSpec.width * 100 + \"%\",\n                height: 0\n              }\n            },\n            React.DOM.div({\n              style: {\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                width: \"100%\",\n                height: \"100%\"\n              },\n              ref: \"container\"\n            })\n          )\n        );\n      }\n\n      // Default behavior is to use the explicit width/height and fall back to computed w/h based on CSS.\n      return React.DOM.div({\n        className: \"vizify-component\",\n        ref: \"container\",\n        style: {\n          width: this.state.computedWidth,\n          height: this.state.computedHeight\n        }\n      });\n    }\n\n  });\n}\n\nmodule.exports = function(React) {\n  var result = {};\n\n  if (typeof React !== 'undefined') {\n    result.VizifyComponent = createComponentClass(React);\n  }\n\n  return result;\n};\n",
    "var throttle = require('./utils').throttle;\nvar invertCoordinates = require('./utils').invertCoordinates;\n\n/* istanbul ignore next */\nmodule.exports = function hover(viz) {\n  var canvas = viz.canvas;\n  var computePos = throttle(canvas.computeDocumentPosition.bind(canvas), 300);\n  var previousActiveRegion;\n  var onMouseOver, onMouseLeave, onMouseMove;\n\n  onMouseOver = onMouseMove = function(ev) {\n    ev.preventDefault();\n\n    if (!canvas.regions || canvas.regions.length === 0) {\n      return;\n    }\n\n    var now = Date.now();\n\n    var pos = computePos();\n    var canvasCoords = pos.toCanvasCoords(ev.clientX, ev.clientY);\n    var inverseCoords;\n    var region;\n    var activeRegion;\n    var syntheticEvent;\n\n    for (var i = 0; i < canvas.regions.length; i += 1) {\n      region = canvas.regions[i];\n      inverseCoords = invertCoordinates(canvasCoords, region.transform);\n      // TODO consider overlapping regions in the future.\n      // Currently latest-declared region gets the event.\n      if (region.rect.containsPoint(inverseCoords)) {\n        activeRegion = region;\n      }\n    }\n\n    if (activeRegion && previousActiveRegion && activeRegion.name === previousActiveRegion.name) {\n      // Continuation, do nothing\n      previousActiveRegion = activeRegion;\n      return;\n    }\n    if (previousActiveRegion) {\n      // We've hovered off the previous region\n      syntheticEvent = {\n        stopPropagation: function() {},\n        preventDefault: function() {},\n        target: ev.target,\n        absolute: {x: ev.clientX, y: ev.clientY, t: now},\n        region: previousActiveRegion\n      };\n      canvas.emit('hoveroff', syntheticEvent);\n    }\n    if (activeRegion) {\n      // We've hovered onto a new region\n      syntheticEvent = {\n        stopPropagation: function() {},\n        preventDefault: function() {},\n        target: ev.target,\n        absolute: {x: ev.clientX, y: ev.clientY, t: now},\n        region: activeRegion\n      };\n      canvas.emit('hoveron', syntheticEvent);\n    }\n\n    previousActiveRegion = activeRegion;\n  };\n\n  onMouseLeave = function(ev) {\n    ev.preventDefault();\n\n    var syntheticEvent;\n    if (previousActiveRegion) {\n      syntheticEvent = {\n        stopPropagation: function() {},\n        preventDefault: function() {},\n        target: ev.target,\n        absolute: {x: ev.clientX, y: ev.clientY, t: Date.now()},\n        region: previousActiveRegion\n      };\n      canvas.emit('hoveroff', syntheticEvent);\n    }\n    previousActiveRegion = null;\n  };\n\n  var vizEl = viz.element;\n  vizEl.addEventListener('mouseover', onMouseOver);\n  vizEl.addEventListener('mouseleave', onMouseLeave);\n  vizEl.addEventListener('mousemove', onMouseMove);\n\n  return function() {\n    vizEl.removeEventListener('mousemove', onMouseMove);\n    vizEl.removeEventListener('mouseleave', onMouseLeave);\n    vizEl.removeEventListener('mouseover', onMouseOver);\n  };\n};\n",
    "var Clock = require('./clock');\nvar Config = require('./config');\n\nvar RenderContext = module.exports = function RenderContext(skipDefaults) {\n  if (!skipDefaults) {\n    this.clock = new Clock();\n    this.config = new Config();\n  }\n};\n\nRenderContext.prototype.fork = function() {\n  var rc = new RenderContext();\n  rc.c = this.c;\n  rc.data = this.data;\n  rc.layout = this.layout;\n  rc.config = new Config(this.config);\n  rc.clock = new Clock(this.clock);\n\n  return rc;\n};\n\nRenderContext.prototype.update = function(elapsed, total) {\n  this.clock.fromStart = elapsed;\n  this.clock.fromEnd = total - elapsed;\n  this.clock.percent = elapsed / total;\n  this.clock.duration = total;\n};\n\nRenderContext.prototype.setRegion = function(name, rect) {\n  this.c.regions.push({\n    name: name,\n    rect: rect,\n    // TODO this is cheating\n    transform: this.c._ctx.currentTransform\n  });\n};\n",
    "var TextLayoutEngine = module.exports = function TextLayoutEngine(canv) {\n  this.canvas = canv;\n};\n\n/* istanbul ignore next */\nTextLayoutEngine.prototype.measureTextWidth = function(text, fontSpec, fontSize) {\n  var c = this.canvas;\n  c.save();\n  c.setFont(fontSpec, fontSize);\n  var retval = c.measureTextWidth(text);\n  c.restore();\n  return retval;\n};\n",
    "var AffineMatrix = require('./affine_matrix');\n\n/**\n * Poor man's throttle\n * @param {Function} fn\n * @param {Number} waitInterval Minimum time between new calls to `fn`, in milliseconds.\n * @return {Function} Runs `fn` and returns the result. If throttled, returns the results of the previous run.\n */\nexports.throttle = function(fn, waitInterval) {\n  var lastCalledTime;\n  var lastResult;\n  return function() {\n    var now = Date.now();\n    if (lastCalledTime) {\n      if (now - lastCalledTime < waitInterval) {\n        return lastResult;\n      }\n    }\n\n    lastCalledTime = now;\n    lastResult = fn.apply(this, arguments);\n    return lastResult;\n  };\n};\n\n/**\n * Given a point and a transform matrix, returns a new point in the same coordinate space which when multiplied\n * by the transform matrix, returns the given point. Essentially P(T^-1)\n * @param {Point} coordinates A point in the current space.\n * @param {Object} transform Transform matrix to compute the inverse of.\n * @return {{x: number, y: number}}\n */\nexports.invertCoordinates = function(coordinates, transform) {\n  var inverseMatrix = new AffineMatrix(transform).inverse();\n  return inverseMatrix.multiplyVector(coordinates);\n};\n",
    "/*globals vz*/\nvar util = require('util'),\n    events = require('events'),\n    Canvas = require('./canvas'),\n    Card = require('./card'),\n    hover = require('./region-hover');\n\nif (typeof window !== 'undefined') {\n  require('../static/vztouch');\n  require('./current_transform_shim').shim(window);\n}\n\n// Add text highlighting styling specifically for Firefox, since\n// our transparent text remains transparent when highlighted in FF.\n// Only way to do this is to use the CSSOM, since modifying pseudo\n// elements via JS directly on elements is impossible.\nif (typeof document !== 'undefined' && typeof document.styleSheets !== 'undefined') {\n  document.head.appendChild(document.createElement('style'));\n  var styleSheet = document.styleSheets[document.styleSheets.length - 1];\n  try {\n    styleSheet.insertRule('._vz-txt-holder::-moz-selection { background-color: rgba(255, 255, 255, 0.3); }', 0);\n  } catch (err) {}\n}\n\n//\n// Prefix a style property\n//\nvar prefix = function(el, prop, val) {\n  var propU = prop.charAt(0).toUpperCase() + prop.substr(1);\n  ['O', 'ms', 'Moz', 'Webkit'].forEach(function(prefix) {\n    el.style[prefix + propU] = val;\n  });\n  el.style[prop] = val;\n};\n\n/* istanbul ignore next */\nvar Viz = module.exports = function Viz(cardEntryPoint, width, height, scale, data) {\n  events.EventEmitter.call(this);\n  var self = this;\n\n  if (typeof width !== 'number') {\n    data = width;\n    width = undefined;\n    height = undefined;\n    scale = undefined;\n  } else if (typeof height !== 'number') {\n    data = height;\n    height = undefined;\n    scale = undefined;\n  } else if (typeof scale !== 'number') {\n    data = scale;\n    scale = undefined;\n  }\n\n  if (typeof data === 'object') {\n    data = JSON.stringify(data);\n  }\n\n  // Basic setup\n  this.entryPoint = cardEntryPoint;\n  this.data = data;\n  this.element = document.createElement('div');\n  this.canvas = new Canvas(width || 300, height || 300, scale || 1);\n  this.element.appendChild(this.canvas.canvas);\n  this.card = new Card(this.canvas, this.entryPoint, this.data);\n\n  // Wrapper styling\n  var s = this.element.style;\n  s.display = 'inline-block';\n  s.position = 'relative';\n  s.width = this.canvas.canvas.style.width;\n  s.height = this.canvas.canvas.style.height;\n  s.overflow = 'hidden';\n  s = this.canvas.canvas.style;\n  s.position = 'absolute';\n  s.top = '0';\n  s.left = '0';\n\n  // Event proxying\n  var proxyEvent = function(name) {\n    self.card.on(name, function() {\n      self.emit.apply(self, [name].concat(Array.prototype.slice.call(arguments)));\n    });\n  };\n  proxyEvent('seek');\n  proxyEvent('play');\n  proxyEvent('pause');\n  proxyEvent('end');\n  proxyEvent('frame');\n\n  var proxyClick = function (e) {\n    this.canvas.regionEventListener('click', e);\n  };\n\n  // Accessibility\n  this.card.on('pause', this._applyText.bind(this));\n  this.card.on('end', this._applyText.bind(this));\n  this.removeVzTouch = vz.touch(this.element, null, {\n    click: proxyClick.bind(this)\n  });\n  this.removeHover = hover(this);\n};\nutil.inherits(Viz, events.EventEmitter);\n\nvar proxyCard = function(name) {\n  Viz.prototype[name] = function() {\n    return this.card[name].apply(this.card, arguments);\n  };\n};\n\nViz.prototype._applyText = function(hidden) {\n  var self = this;\n\n  while (self.element.childNodes.length > 1) {\n    self.element.removeChild(self.element.childNodes[1]);\n  }\n\n  self.canvas.textCache.forEach(function(tc) {\n    var el = document.createElement('div');\n    el.className = '_vz-txt-holder';\n    if (hidden) {\n      el.style.display = 'none';\n    }\n    el.style.position = 'absolute';\n    el.style.left = 0;\n    el.style.top = 0;\n    el.style.font = tc.font;\n    el.style.lineHeight = tc.font.match(/(\\d+px)/)[1];\n    el.style.color = 'transparent';\n    el.style.whiteSpace = 'nowrap';\n    // Baseline hack\n    // FIXME - Use text metrics to align properly\n    el.style.marginTop = parseInt(el.style.lineHeight, 10) * -0.85 + 'px';\n\n    // Apply the text's transform\n    prefix(el, 'transformOrigin', 'left');\n    prefix(el, 'transform', 'matrix(' + [\n      tc.m.a, tc.m.b, tc.m.c, tc.m.d, tc.m.e, tc.m.f\n    ].join(', ') + ')');\n\n    el.appendChild(document.createTextNode(tc.text));\n    self.element.appendChild(el);\n  });\n};\n\nViz.prototype.reload = function(entryPoint, data) {\n  if (typeof entryPoint !== 'function') {\n    data = entryPoint;\n    entryPoint = undefined;\n  }\n\n  if (!data) {\n    data = this.data;\n  }\n  if (!entryPoint) {\n    entryPoint = this.entryPoint;\n  }\n\n  return this.card.reload(entryPoint, data);\n};\n\nViz.prototype.resize = function(width, height, scale) {\n  this.canvas.resize(width, height, scale);\n  this.element.style.width = this.canvas.canvas.style.width;\n  this.element.style.height = this.canvas.canvas.style.height;\n};\n\nViz.prototype.scale = function(scale) {\n  this.resize(this.canvas.width, this.canvas.height, scale);\n};\n\nViz.prototype.load = function(callback) {\n  this.card.load(function() {\n    // Load up text from the last frame\n    try {\n      this.frame(this.duration - 1);\n      this._applyText(true);\n    } catch (err) {} // Ignore errors and carry on\n    this.canvas.clear();\n    callback();\n  }.bind(this));\n};\n\nproxyCard('getTime');\nproxyCard('frame');\nproxyCard('play');\nproxyCard('seek');\nproxyCard('pause');\n",
    "'use strict';\n\n//\n// Quick usage:\n//\n//     vz.touch(el, [options], events);\n//\n//  * el - A DOM element, or array-like container of DOM elements (e.g.\n//         jQuery, Array, NodeList).\n//\n//  * options - Optional map of options to use.  See below for details.\n//\n//  * events - Map of events to bind.  Supported events: click down up\n//             drag.\n//\n// Event handler work largely like regular old DOM event handlers.  The\n// `this` object is set to the target of the event, and a single event\n// argument is passed through defined below.  Note that `preventDefault`\n// is always called before the event is passed to the handler, but a\n// dummy `preventDefault` method is still provided for compatibility.\n//\n// Event interface:\n// {\n//   stopPropagation: function,\n//   preventDefault: dummy function,\n//   target: target element,\n//   absolute/relative/delta: {\n//     t: time\n//     x: window x position\n//     y: window y position\n//   }\n//   dragState: 0|1|2 // starting, continuing, ended\n// }\n//\n// Note that relative, delta, and dragState ONLY appear for drag events\n//\n// Options:\n//\n//   * `selector` - If present,\n//     events will only be handled if the target matches `selector`.  This\n//     can to used to, for example, bind vztouch to `document.body` and\n//     handle events on all `a` tags.  Note that this requires recent\n//     browsers in order to function, notably IE9+.\n//\n//   * `dragDirection` - If `'vertical'` or `'horizontal'`, dragging is\n//     locked to that particular axis.  Attempting to drag in the other\n//     direction will cause native browser behavior (e.g. scrolling on\n//     a mobile device).\n//\n\n(function() {\n\n  ///////////////////////////////////////////////\n  // Utility\n  ///////////////////////////////////////////////\n\n  var matchesSelector = function() {\n    var name = undefined;\n    var prefixii = 'webkit moz ms o'.split(/\\s+/);\n    return function(el, sel) {\n      if (name === undefined) {\n        name = null;\n\n        if (typeof el.matches == 'function') {\n          name = 'matches';\n        } else {\n          prefixii.forEach(function(p) {\n            if (typeof el[p + 'MatchesSelector'] == 'function')\n              name = p + 'MatchesSelector';\n          });\n        }\n      } else if (name === null) {\n        return false;\n      } else {\n        return el[name](sel);\n      }\n    };\n  }();\n\n  ///////////////////////////////////////////////\n  // Internal flags\n  ///////////////////////////////////////////////\n\n  // When true, click events will be fully emulated and the native\n  // click event never bound.\n  var ignoreNativeClick = false;\n\n  // Sets how many pixels along an axis must be moved to consider an\n  // action a drag.\n  var DRAG_THRESHOLD = 3;\n\n  // If we're using the stock android browser, we *cannot* bind to\n  // click events because the touch events cannot be properly cancelled.\n  if (navigator.userAgent.match(/Android/) && !navigator.userAgent.match(/Firefox|Chrome/))\n    ignoreNativeClick = true;\n\n  // Does extra logging when set\n  var DEBUG = false;\n\n  /////////////////////////////////////////////\n  // Public Interface\n  /////////////////////////////////////////////\n\n  // Ensure namespace exists\n  if (!window.vz)\n    window.vz = {};\n\n  // Event types: down, up, drag, click\n  vz.touch = function(el, opts, events) {\n    // Sanity\n    if (!el || el.length === 0)\n      return function() {};\n\n    // Handle jQuery, arrays, etc\n    if (el.length) {\n      var cleanups = [];\n      for (var i=0; i<el.length; i++)\n        cleanups.push(vz.touch(el[i], opts, events));\n      return function() {\n        for (var i=0; i<cleanups.length; i++)\n          cleanups[i]();\n      };\n    }\n\n    // Opts is optional\n    if (!events) {\n      events = opts;\n      opts = undefined;\n    }\n    if (!opts)\n      opts = {};\n\n    // If events is a function, treat it as shorthand syntax for just\n    // binding click.\n    if (typeof events == 'function')\n      events = {click: events};\n\n    // Validate events and options\n    for (var i in events) if (events.hasOwnProperty(i))\n      if (['down', 'up', 'drag', 'click'].indexOf(i) < 0)\n        throw new Error('Unsupported event \"' + i + '\"');\n    for (var i in opts) if (opts.hasOwnProperty(i))\n      if (['dragDirection', 'selector'].indexOf(i) < 0)\n        throw new Error('Unsupported option \"' + i + '\"');\n\n    ////////////////////////////////////////////////////\n    // Implementation\n    ////////////////////////////////////////////////////\n\n    // Drag state\n    var dragInfo = {\n      // Start pos\n      sx: 0,\n      sy: 0,\n      // Current pos\n      x: 0,\n      y: 0,\n      // Total movement\n      tx: 0,\n      ty: 0,\n\n      // Start time\n      sd: 0,\n      // Current time\n      d: 0,\n      // Total time\n      td: 0,\n\n      // Target drag element\n      target: null,\n\n      // Current drag state\n      state: 0,\n    };\n\n    // Gets controlled by drag and touch events.  When drag goes over\n    // a threshold the next click is ignored.  When a touchend finishes\n    // WITHIN threshold it will fire click instantly and set this so\n    // that the regular touch event doesn't occur.\n    var ignoreThisClick = false;\n\n    // Gets toggled by the drag listener if directional dragging is enabled\n    var ignoreThisDrag = false;\n\n    // When true, drag events are bound to the window.  Reset after\n    // a drag ends.\n    var dragEventsBound = true;\n\n    // When true, we have sent a drag event to the user and will need\n    // to follow up by sending a final null drag to signal the end.\n    var dragFired = false;\n\n    // Special handler for preventing text selection while dragging\n    var selectionKiller = function(e) {\n      if (DEBUG)\n        console.log('selectionKiller');\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    };\n\n    // Gets the window position of an event\n    var getPosX = function(e) {\n      if (e.touches && e.touches.length)\n        return e.touches[0].pageX;\n      else if (!e.touches && typeof e.pageX == 'number')\n        return e.pageX;\n      else if (!e.touches && typeof e.clientX == 'number')\n        return e.clientX + document.body.scrollLeft;\n      else\n        return undefined;\n    };\n    var getPosY = function(e) {\n      if (e.touches && e.touches.length)\n        return e.touches[0].pageY;\n      else if (!e.touches && typeof e.pageY == 'number')\n        return e.pageY;\n      else if (!e.touches && typeof e.clientY == 'number')\n        return e.clientY + document.body.scrollTop;\n      else\n      return undefined;\n    };\n\n    // Special handler for ending drags regardless of where the cursor is\n    var dragEnder = function(e) {\n      if (DEBUG)\n        console.log('dragEnder', e ? e.type : undefined);\n\n      window.removeEventListener('mousemove', drag, false);\n      window.removeEventListener('touchmove', drag, false);\n      window.removeEventListener('mouseup', dragEnder, true);\n      window.removeEventListener('touchend', dragEnder, true);\n      window.removeEventListener('selectstart', selectionKiller, true);\n\n      if (dragEventsBound) {\n        dragEventsBound = false;\n        if (events.drag && dragFired) {\n          dragFired = false;\n          var data = {\n            stopPropagation: function() { e && e.stopPropagation(); },\n            preventDefault: function() {},\n            target: dragInfo.target,\n            absolute: {x: dragInfo.x, y: dragInfo.y, t: +new Date()},\n            relative: {x: dragInfo.x - dragInfo.sx,\n                       y: dragInfo.y - dragInfo.sy,\n                       t: (+new Date()) - dragInfo.st\n                      },\n            delta: {x: 0, y: 0, t: (+new Date()) - dragInfo.t},\n            dragState: 2\n          };\n          if (opts.dragDirection == 'horizontal') {\n            data.absolute.y =\n            data.relative.y =\n            data.delta.y = 0;\n          } else if (opts.dragDirection == 'vertical') {\n            data.absolute.x =\n            data.relative.x =\n            data.delta.x = 0;\n          }\n          events.drag.call(dragInfo.target, data);\n        }\n      }\n    };\n\n    var down = function(e) {\n      if (DEBUG)\n        console.log('down', e.type);\n      if (opts.selector && !matchesSelector(e.target, opts.selector))\n        return;\n\n      // Ignore multitouches or non-primary mousebutton clicks\n      if ((e.touches && e.touches.length > 2) || (e.button !== undefined && e.button !== 0))\n        return;\n\n      // This is the start of a new click; don't ignore it\n      ignoreThisClick = false;\n\n      // If the user's listening for down events, pass on through\n      if (events.down) {\n        e.preventDefault();\n        events.down.call(this, {\n          stopPropagation: function() { e.stopPropagation(); },\n          preventDefault: function() {},\n          target: e.target,\n          absolute: {\n            x: getPosX(e),\n            y: getPosY(e),\n            t: +new Date()\n          }\n        });\n      }\n\n      // Re-enable drag listenering\n      ignoreThisDrag = false;\n\n      // For dragging via mouse-type events, disable text selection.\n      if (events.drag && e.type == 'mousedown') {\n        e.preventDefault();\n      }\n\n      // For drag events bootstrap the position and element.  Touchstart\n      // is similar, because we need to track the start of a potential\n      // \"click\" event.\n      if (events.drag || e.type == 'touchstart') {\n\n        // Set drag starting coordinates\n        dragInfo.sx = getPosX(e);\n        dragInfo.sy = getPosY(e);\n        dragInfo.x = dragInfo.sx;\n        dragInfo.y = dragInfo.sy;\n        dragInfo.tx = 0;\n        dragInfo.ty = 0;\n        dragInfo.t = dragInfo.st = +new Date();\n        dragInfo.target = e.target;\n        dragInfo.state = 0;\n\n        // Bind to drag events\n        window.addEventListener('mousemove', drag, false);\n        window.addEventListener('touchmove', drag, false);\n        window.addEventListener('mouseup', dragEnder, true);\n        window.addEventListener('touchend', dragEnder, true);\n        window.addEventListener('selectstart', selectionKiller, true);\n        dragEventsBound = true;\n      }\n    };\n\n    var up = function(e) {\n      if (DEBUG)\n        console.log('up', e.type);\n      if (opts.selector && !matchesSelector(e.target, opts.selector))\n        return;\n\n      var x = 0;\n      var y = 0;\n      if (events.click || events.up) {\n        x = getPosX(e);\n        y = getPosY(e);\n        if (!x && x !== 0)\n          x = dragInfo.x;\n        if (!y && y !== 0)\n          y = dragInfo.y;\n      }\n\n      // If the user's listening for up events, pass on through\n      if (events.up) {\n        e.preventDefault();\n        events.up.call(this, {\n          stopPropagation: function() { e.stopPropagation(); },\n          preventDefault: function() {},\n          target: e.target,\n          absolute: {\n            x: x,\n            y: y,\n            t: +new Date()\n          }\n        });\n      }\n\n      // Optimized click delivery\n      if (events.click && !ignoreThisClick) {\n        // If we're ignoring native click, simulate a click event.\n        // Similarly, if this event came from a touchend, we can trigger\n        // our own click and ignore the real click event, which will\n        // give snappier performance.\n        if (ignoreNativeClick || e.type == 'touchend') {\n          e.preventDefault();\n          ignoreThisClick = true;\n          events.click.call(this, {\n            stopPropagation: function() { e.stopPropagation(); },\n            preventDefault: function() {},\n            target: e.target,\n            absolute: {\n              x: x,\n              y: y,\n              t: +new Date()\n            }\n          });\n        }\n      }\n    };\n\n    var click = function(e) {\n      if (DEBUG)\n        console.log('click', e.type);\n      if (opts.selector && !matchesSelector(e.target, opts.selector))\n        return;\n\n      if (!ignoreThisClick && events.click) {\n        e.preventDefault();\n        events.click.call(this, {\n          stopPropagation: function() { e.stopPropagation() },\n          preventDefault: function() {},\n          target: e.target,\n          absolute: {\n            x: getPosX(e),\n            y: getPosY(e),\n            t: +new Date()\n          }\n        });\n      }\n    };\n\n    var drag = function(e) {\n      if (DEBUG)\n        console.log('drag', e.type);\n\n      // Don't handle multitouch\n      if (e.touches && e.touches.length > 1)\n        return;\n\n      // If we're ignoring the drag, there's nothing to do\n      if (ignoreThisDrag)\n        return;\n\n      // New position\n      var nx = getPosX(e);\n      var ny = getPosY(e);\n\n      // New date\n      var nt = +new Date();\n\n      // Prep the data to pass to the client\n      var data = {\n        stopPropagation: function() { e.stopPropagation() },\n        preventDefault: function() {},\n        target: dragInfo.target,\n        absolute: {x: nx, y: ny, t: nt},\n        relative: {x: nx - dragInfo.sx, y: ny - dragInfo.sy, t: nt - dragInfo.st},\n        delta: {x: nx - dragInfo.x, y: ny - dragInfo.y, t: nt - dragInfo.t},\n        dragState: dragInfo.state\n      };\n\n      // When limiting to one axis, ignore the other axis' values\n      if (opts.dragDirection == 'horizontal') {\n        data.absolute.y =\n        data.relative.y =\n        data.delta.y = 0;\n      } else if (opts.dragDirection == 'vertical') {\n        data.absolute.x =\n        data.relative.x =\n        data.delta.x = 0;\n      }\n\n      // Update the last position\n      dragInfo.t = nt;\n      dragInfo.x = nx;\n      dragInfo.y = ny;\n      dragInfo.tx += Math.abs(data.delta.x);\n      dragInfo.ty += Math.abs(data.delta.y);\n\n      // If we're limiting dragging to one axis, check for the direction of the first\n      // drag event to make a decision.\n      if (data.dragState == 0) {\n        if (opts.dragDirection == 'vertical') {\n          if (dragInfo.ty < dragInfo.tx) {\n            ignoreThisDrag = true;\n            return;\n          }\n        } else if (opts.dragDirection == 'horizontal') {\n          if (dragInfo.tx < dragInfo.ty) {\n            ignoreThisDrag = true;\n            return;\n          }\n        }\n      }\n\n      // When true, we've passed the drag threshold and are treating\n      // this drag as a drag and not a sloppy data.\n      var overThreshold = (dragInfo.tx > DRAG_THRESHOLD) || (dragInfo.ty > DRAG_THRESHOLD);\n\n      // If we've moved more than the drag threshold on either axis, stop\n      // click from happening.\n      if (!ignoreThisClick && overThreshold)\n        ignoreThisClick = true;\n\n      // If we've moved more than the drag treshold on the configured\n      // axis (both by default), prevent native scroll from working and\n      // then drigger the drag business.\n      if (events.drag && overThreshold) {\n        e.preventDefault();\n\n        // Pass the drag event on down\n        if (events.drag) {\n          events.drag.call(dragInfo.target, data);\n          dragFired = true;\n          dragInfo.state = 1;\n        }\n      }\n    };\n\n    // Bind all our events\n    el.addEventListener('touchstart', down, false);\n    el.addEventListener('touchend', up, false);\n    if (!ignoreNativeClick) {\n      el.addEventListener('mousedown', down, false);\n      el.addEventListener('mouseup', up, false);\n      el.addEventListener('click', click, false);\n    }\n\n    // Return a cleanup function\n    return function() {\n      el.removeEventListener('touchstart', down);\n      el.removeEventListener('touchend', up);\n      if (!ignoreNativeClick) {\n        el.removeEventListener('mousedown', down);\n        el.removeEventListener('mouseup', up);\n        el.removeEventListener('click', click);\n      }\n\n      if (dragEventsBound) {\n        dragEventsBound = false;\n        dragEnder();\n      }\n    };\n  };\n})();\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n",
    "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n",
    "// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n",
    "module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n"
  ]
}